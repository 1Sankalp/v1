"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./app/lib/auth.config.ts":
/*!********************************!*\
  !*** ./app/lib/auth.config.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authConfig: () => (/* binding */ authConfig)\n/* harmony export */ });\n/* harmony import */ var _auth_core_providers_github__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @auth/core/providers/github */ \"(middleware)/./node_modules/@auth/core/providers/github.js\");\n/* harmony import */ var _auth_core_providers_google__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @auth/core/providers/google */ \"(middleware)/./node_modules/@auth/core/providers/google.js\");\n/* harmony import */ var _auth_core_providers_credentials__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @auth/core/providers/credentials */ \"(middleware)/./node_modules/@auth/core/providers/credentials.js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @supabase/supabase-js */ \"(middleware)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! bcryptjs */ \"(middleware)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var resend__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! resend */ \"(middleware)/./node_modules/resend/dist/index.mjs\");\n\n\n\n\n\n\n\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_6__.createClient)(\"https://jznlgabssuvtmkikdixz.supabase.co\", process.env.SUPABASE_SERVICE_ROLE_KEY);\nconst resend = new resend__WEBPACK_IMPORTED_MODULE_5__.Resend(process.env.RESEND_API_KEY);\nconst authConfig = {\n    pages: {\n        signIn: \"/login\",\n        verifyRequest: \"/verify-request\",\n        error: \"/auth/error\"\n    },\n    providers: [\n        (0,_auth_core_providers_github__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n            clientId: process.env.GITHUB_ID,\n            clientSecret: process.env.GITHUB_SECRET\n        }),\n        (0,_auth_core_providers_google__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n            clientId: process.env.GOOGLE_ID,\n            clientSecret: process.env.GOOGLE_SECRET\n        }),\n        (0,_auth_core_providers_credentials__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                },\n                username: {\n                    label: \"Username\",\n                    type: \"text\"\n                },\n                isSignup: {\n                    label: \"Is Signup\",\n                    type: \"boolean\"\n                }\n            },\n            async authorize (credentials) {\n                const { email, password, username, isSignup } = credentials;\n                if (!email || !password) {\n                    throw new Error(\"Invalid credentials\");\n                }\n                if (isSignup && !username) {\n                    throw new Error(\"Username is required for signup\");\n                }\n                try {\n                    if (isSignup) {\n                        // Check if user already exists\n                        const { data: existingUser } = await supabase.from(\"users\").select(\"id\").or(`email.eq.${email.toLowerCase()},username.eq.${username.toLowerCase()}`).single();\n                        if (existingUser) {\n                            throw new Error(\"User already exists\");\n                        }\n                        const hashedPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"].hash(password, 10);\n                        const userId = crypto__WEBPACK_IMPORTED_MODULE_4___default().randomUUID();\n                        // Create new user with minimal fields\n                        const { data: newUser, error: createError } = await supabase.from(\"users\").insert({\n                            id: userId,\n                            email: email.toLowerCase(),\n                            username: username.toLowerCase(),\n                            hashed_password: hashedPassword,\n                            emailVerified: null\n                        }).select('id, email, username, \"emailVerified\"').single();\n                        if (createError) {\n                            console.error(\"Create user error:\", createError);\n                            throw new Error(createError.message);\n                        }\n                        // Generate verification token\n                        const verificationToken = crypto__WEBPACK_IMPORTED_MODULE_4___default().randomUUID();\n                        // Store verification token\n                        const { error: tokenError } = await supabase.from(\"verification_tokens\").insert({\n                            identifier: email.toLowerCase(),\n                            token: verificationToken,\n                            expires: new Date(Date.now() + 24 * 60 * 60 * 1000) // 24 hours\n                        });\n                        if (tokenError) {\n                            console.error(\"Token creation error:\", tokenError);\n                        // Don't throw here, still allow user creation\n                        } else {\n                            // Send verification email\n                            try {\n                                const verificationUrl = `${process.env.NEXTAUTH_URL}/api/auth/verify-email?token=${verificationToken}`;\n                                await resend.emails.send({\n                                    from: \"Superfolio <onboarding@superfolio.me>\",\n                                    to: email.toLowerCase(),\n                                    subject: \"Verify your Superfolio email\",\n                                    html: `\n                    <h1>Welcome to Superfolio!</h1>\n                    <p>Thank you for joining us. Please verify your email address by clicking the link below:</p>\n                    <a href=\"${verificationUrl}\">Verify Email Address</a>\n                    <p>Your profile will be available at: superfolio.me/${username}</p>\n                    <p>If the button above doesn't work, copy and paste this URL into your browser:</p>\n                    <p>${verificationUrl}</p>\n                  `\n                                });\n                                console.log(\"Verification email sent to:\", email);\n                            } catch (emailError) {\n                                console.error(\"Error sending verification email:\", emailError);\n                            // Don't throw here, still allow user creation\n                            }\n                        }\n                        return newUser;\n                    }\n                    // Handle sign in\n                    const { data: user, error } = await supabase.from(\"users\").select('id, email, username, hashed_password, \"emailVerified\"').eq(\"email\", email.toLowerCase()).single();\n                    if (error || !user) {\n                        throw new Error(\"User not found\");\n                    }\n                    const isValidPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"].compare(password, user.hashed_password || \"\");\n                    if (!isValidPassword) {\n                        throw new Error(\"Invalid password\");\n                    }\n                    // Return user without password\n                    const { hashed_password: _, ...userWithoutPassword } = user;\n                    return userWithoutPassword;\n                } catch (error) {\n                    console.error(\"Auth error:\", error);\n                    throw error;\n                }\n            }\n        })\n    ],\n    callbacks: {\n        async jwt ({ token, user, trigger, session }) {\n            if (trigger === \"update\" && session) {\n                return {\n                    ...token,\n                    ...session.user\n                };\n            }\n            if (user) {\n                token.id = user.id;\n                token.username = user.username;\n                token.emailVerified = user.emailVerified;\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (token) {\n                session.user.id = token.id;\n                session.user.username = token.username;\n                session.user.emailVerified = token.emailVerified;\n            }\n            return session;\n        }\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QjtvQkFFQSwrQkFBK0I7b0JBQy9CLE1BQU0sRUFBRWdCLGlCQUFpQndCLENBQUMsRUFBRSxHQUFHQyxxQkFBcUIsR0FBR0w7b0JBQ3ZELE9BQU9LO2dCQUNULEVBQUUsT0FBT3pELE9BQVk7b0JBQ25Ca0MsUUFBUWxDLEtBQUssQ0FBQyxlQUFlQTtvQkFDN0IsTUFBTUE7Z0JBQ1I7WUFDRjtRQUNGO0tBQ0Q7SUFDRDBELFdBQVc7UUFDVCxNQUFNQyxLQUFJLEVBQUVwQixLQUFLLEVBQUVhLElBQUksRUFBRVEsT0FBTyxFQUFFQyxPQUFPLEVBQUU7WUFDekMsSUFBSUQsWUFBWSxZQUFZQyxTQUFTO2dCQUNuQyxPQUFPO29CQUFFLEdBQUd0QixLQUFLO29CQUFFLEdBQUdzQixRQUFRVCxJQUFJO2dCQUFDO1lBQ3JDO1lBRUEsSUFBSUEsTUFBTTtnQkFDUmIsTUFBTVIsRUFBRSxHQUFHcUIsS0FBS3JCLEVBQUU7Z0JBQ2xCUSxNQUFNMUIsUUFBUSxHQUFHdUMsS0FBS3ZDLFFBQVE7Z0JBQzlCMEIsTUFBTU4sYUFBYSxHQUFHbUIsS0FBS25CLGFBQWE7WUFDMUM7WUFDQSxPQUFPTTtRQUNUO1FBQ0EsTUFBTXNCLFNBQVEsRUFBRUEsT0FBTyxFQUFFdEIsS0FBSyxFQUFFO1lBQzlCLElBQUlBLE9BQU87Z0JBQ1RzQixRQUFRVCxJQUFJLENBQUNyQixFQUFFLEdBQUdRLE1BQU1SLEVBQUU7Z0JBQzFCOEIsUUFBUVQsSUFBSSxDQUFDdkMsUUFBUSxHQUFHMEIsTUFBTTFCLFFBQVE7Z0JBQ3RDZ0QsUUFBUVQsSUFBSSxDQUFDbkIsYUFBYSxHQUFHTSxNQUFNTixhQUFhO1lBQ2xEO1lBQ0EsT0FBTzRCO1FBQ1Q7SUFDRjtBQUNGLEVBQTBCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2FwcC9saWIvYXV0aC5jb25maWcudHM/YWEwYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IE5leHRBdXRoQ29uZmlnIH0gZnJvbSBcIm5leHQtYXV0aFwiXG5pbXBvcnQgR2l0SHViIGZyb20gXCJAYXV0aC9jb3JlL3Byb3ZpZGVycy9naXRodWJcIlxuaW1wb3J0IEdvb2dsZSBmcm9tIFwiQGF1dGgvY29yZS9wcm92aWRlcnMvZ29vZ2xlXCJcbmltcG9ydCBDcmVkZW50aWFscyBmcm9tIFwiQGF1dGgvY29yZS9wcm92aWRlcnMvY3JlZGVudGlhbHNcIlxuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJ1xuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHRqcydcbmltcG9ydCBjcnlwdG8gZnJvbSAnY3J5cHRvJ1xuaW1wb3J0IHsgUmVzZW5kIH0gZnJvbSAncmVzZW5kJ1xuXG5jb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChcbiAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMISxcbiAgcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSFcbilcblxuY29uc3QgcmVzZW5kID0gbmV3IFJlc2VuZChwcm9jZXNzLmVudi5SRVNFTkRfQVBJX0tFWSlcblxuZXhwb3J0IGNvbnN0IGF1dGhDb25maWcgPSB7XG4gIHBhZ2VzOiB7XG4gICAgc2lnbkluOiAnL2xvZ2luJyxcbiAgICB2ZXJpZnlSZXF1ZXN0OiAnL3ZlcmlmeS1yZXF1ZXN0JyxcbiAgICBlcnJvcjogJy9hdXRoL2Vycm9yJ1xuICB9LFxuICBwcm92aWRlcnM6IFtcbiAgICBHaXRIdWIoe1xuICAgICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52LkdJVEhVQl9JRCEsXG4gICAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52LkdJVEhVQl9TRUNSRVQhLFxuICAgIH0pLFxuICAgIEdvb2dsZSh7XG4gICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuR09PR0xFX0lEISxcbiAgICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuR09PR0xFX1NFQ1JFVCEsXG4gICAgfSksXG4gICAgQ3JlZGVudGlhbHMoe1xuICAgICAgY3JlZGVudGlhbHM6IHtcbiAgICAgICAgZW1haWw6IHsgbGFiZWw6IFwiRW1haWxcIiwgdHlwZTogXCJlbWFpbFwiIH0sXG4gICAgICAgIHBhc3N3b3JkOiB7IGxhYmVsOiBcIlBhc3N3b3JkXCIsIHR5cGU6IFwicGFzc3dvcmRcIiB9LFxuICAgICAgICB1c2VybmFtZTogeyBsYWJlbDogXCJVc2VybmFtZVwiLCB0eXBlOiBcInRleHRcIiB9LFxuICAgICAgICBpc1NpZ251cDogeyBsYWJlbDogXCJJcyBTaWdudXBcIiwgdHlwZTogXCJib29sZWFuXCIgfVxuICAgICAgfSxcbiAgICAgIGFzeW5jIGF1dGhvcml6ZShjcmVkZW50aWFscykge1xuICAgICAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCwgdXNlcm5hbWUsIGlzU2lnbnVwIH0gPSBjcmVkZW50aWFscyBhcyBhbnk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWVtYWlsIHx8ICFwYXNzd29yZCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjcmVkZW50aWFscycpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzU2lnbnVwICYmICF1c2VybmFtZSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVXNlcm5hbWUgaXMgcmVxdWlyZWQgZm9yIHNpZ251cCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoaXNTaWdudXApIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHVzZXIgYWxyZWFkeSBleGlzdHNcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmdVc2VyIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAgICAgICAuZnJvbSgndXNlcnMnKVxuICAgICAgICAgICAgICAuc2VsZWN0KCdpZCcpXG4gICAgICAgICAgICAgIC5vcihgZW1haWwuZXEuJHtlbWFpbC50b0xvd2VyQ2FzZSgpfSx1c2VybmFtZS5lcS4ke3VzZXJuYW1lLnRvTG93ZXJDYXNlKCl9YClcbiAgICAgICAgICAgICAgLnNpbmdsZSgpO1xuXG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdVc2VyKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVXNlciBhbHJlYWR5IGV4aXN0cycpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMCk7XG4gICAgICAgICAgICBjb25zdCB1c2VySWQgPSBjcnlwdG8ucmFuZG9tVVVJRCgpO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgbmV3IHVzZXIgd2l0aCBtaW5pbWFsIGZpZWxkc1xuICAgICAgICAgICAgY29uc3QgeyBkYXRhOiBuZXdVc2VyLCBlcnJvcjogY3JlYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgICAgIC5mcm9tKCd1c2VycycpXG4gICAgICAgICAgICAgIC5pbnNlcnQoe1xuICAgICAgICAgICAgICAgIGlkOiB1c2VySWQsXG4gICAgICAgICAgICAgICAgZW1haWw6IGVtYWlsLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgICAgICAgaGFzaGVkX3Bhc3N3b3JkOiBoYXNoZWRQYXNzd29yZCxcbiAgICAgICAgICAgICAgICBlbWFpbFZlcmlmaWVkOiBudWxsXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5zZWxlY3QoJ2lkLCBlbWFpbCwgdXNlcm5hbWUsIFwiZW1haWxWZXJpZmllZFwiJylcbiAgICAgICAgICAgICAgLnNpbmdsZSgpO1xuXG4gICAgICAgICAgICBpZiAoY3JlYXRlRXJyb3IpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ3JlYXRlIHVzZXIgZXJyb3I6JywgY3JlYXRlRXJyb3IpO1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY3JlYXRlRXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEdlbmVyYXRlIHZlcmlmaWNhdGlvbiB0b2tlblxuICAgICAgICAgICAgY29uc3QgdmVyaWZpY2F0aW9uVG9rZW4gPSBjcnlwdG8ucmFuZG9tVVVJRCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTdG9yZSB2ZXJpZmljYXRpb24gdG9rZW5cbiAgICAgICAgICAgIGNvbnN0IHsgZXJyb3I6IHRva2VuRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgICAgIC5mcm9tKCd2ZXJpZmljYXRpb25fdG9rZW5zJylcbiAgICAgICAgICAgICAgLmluc2VydCh7XG4gICAgICAgICAgICAgICAgaWRlbnRpZmllcjogZW1haWwudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgICAgICB0b2tlbjogdmVyaWZpY2F0aW9uVG9rZW4sXG4gICAgICAgICAgICAgICAgZXhwaXJlczogbmV3IERhdGUoRGF0ZS5ub3coKSArIDI0ICogNjAgKiA2MCAqIDEwMDApIC8vIDI0IGhvdXJzXG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAodG9rZW5FcnJvcikge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdUb2tlbiBjcmVhdGlvbiBlcnJvcjonLCB0b2tlbkVycm9yKTtcbiAgICAgICAgICAgICAgLy8gRG9uJ3QgdGhyb3cgaGVyZSwgc3RpbGwgYWxsb3cgdXNlciBjcmVhdGlvblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gU2VuZCB2ZXJpZmljYXRpb24gZW1haWxcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCB2ZXJpZmljYXRpb25VcmwgPSBgJHtwcm9jZXNzLmVudi5ORVhUQVVUSF9VUkx9L2FwaS9hdXRoL3ZlcmlmeS1lbWFpbD90b2tlbj0ke3ZlcmlmaWNhdGlvblRva2VufWA7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgYXdhaXQgcmVzZW5kLmVtYWlscy5zZW5kKHtcbiAgICAgICAgICAgICAgICAgIGZyb206ICdTdXBlcmZvbGlvIDxvbmJvYXJkaW5nQHN1cGVyZm9saW8ubWU+JyxcbiAgICAgICAgICAgICAgICAgIHRvOiBlbWFpbC50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgICAgICAgICAgc3ViamVjdDogJ1ZlcmlmeSB5b3VyIFN1cGVyZm9saW8gZW1haWwnLFxuICAgICAgICAgICAgICAgICAgaHRtbDogYFxuICAgICAgICAgICAgICAgICAgICA8aDE+V2VsY29tZSB0byBTdXBlcmZvbGlvITwvaDE+XG4gICAgICAgICAgICAgICAgICAgIDxwPlRoYW5rIHlvdSBmb3Igam9pbmluZyB1cy4gUGxlYXNlIHZlcmlmeSB5b3VyIGVtYWlsIGFkZHJlc3MgYnkgY2xpY2tpbmcgdGhlIGxpbmsgYmVsb3c6PC9wPlxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiJHt2ZXJpZmljYXRpb25Vcmx9XCI+VmVyaWZ5IEVtYWlsIEFkZHJlc3M8L2E+XG4gICAgICAgICAgICAgICAgICAgIDxwPllvdXIgcHJvZmlsZSB3aWxsIGJlIGF2YWlsYWJsZSBhdDogc3VwZXJmb2xpby5tZS8ke3VzZXJuYW1lfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHA+SWYgdGhlIGJ1dHRvbiBhYm92ZSBkb2Vzbid0IHdvcmssIGNvcHkgYW5kIHBhc3RlIHRoaXMgVVJMIGludG8geW91ciBicm93c2VyOjwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHA+JHt2ZXJpZmljYXRpb25Vcmx9PC9wPlxuICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdWZXJpZmljYXRpb24gZW1haWwgc2VudCB0bzonLCBlbWFpbCk7XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVtYWlsRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZW5kaW5nIHZlcmlmaWNhdGlvbiBlbWFpbDonLCBlbWFpbEVycm9yKTtcbiAgICAgICAgICAgICAgICAvLyBEb24ndCB0aHJvdyBoZXJlLCBzdGlsbCBhbGxvdyB1c2VyIGNyZWF0aW9uXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG5ld1VzZXI7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gSGFuZGxlIHNpZ24gaW5cbiAgICAgICAgICBjb25zdCB7IGRhdGE6IHVzZXIsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAgICAgLmZyb20oJ3VzZXJzJylcbiAgICAgICAgICAgIC5zZWxlY3QoJ2lkLCBlbWFpbCwgdXNlcm5hbWUsIGhhc2hlZF9wYXNzd29yZCwgXCJlbWFpbFZlcmlmaWVkXCInKVxuICAgICAgICAgICAgLmVxKCdlbWFpbCcsIGVtYWlsLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgICAgICAuc2luZ2xlKCk7XG5cbiAgICAgICAgICBpZiAoZXJyb3IgfHwgIXVzZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVXNlciBub3QgZm91bmQnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBpc1ZhbGlkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgdXNlci5oYXNoZWRfcGFzc3dvcmQgfHwgJycpO1xuICAgICAgICAgIGlmICghaXNWYWxpZFBhc3N3b3JkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcGFzc3dvcmQnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBSZXR1cm4gdXNlciB3aXRob3V0IHBhc3N3b3JkXG4gICAgICAgICAgY29uc3QgeyBoYXNoZWRfcGFzc3dvcmQ6IF8sIC4uLnVzZXJXaXRob3V0UGFzc3dvcmQgfSA9IHVzZXI7XG4gICAgICAgICAgcmV0dXJuIHVzZXJXaXRob3V0UGFzc3dvcmQ7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdBdXRoIGVycm9yOicsIGVycm9yKTtcbiAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIF0sXG4gIGNhbGxiYWNrczoge1xuICAgIGFzeW5jIGp3dCh7IHRva2VuLCB1c2VyLCB0cmlnZ2VyLCBzZXNzaW9uIH0pIHtcbiAgICAgIGlmICh0cmlnZ2VyID09PSBcInVwZGF0ZVwiICYmIHNlc3Npb24pIHtcbiAgICAgICAgcmV0dXJuIHsgLi4udG9rZW4sIC4uLnNlc3Npb24udXNlciB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgIHRva2VuLmlkID0gdXNlci5pZDtcbiAgICAgICAgdG9rZW4udXNlcm5hbWUgPSB1c2VyLnVzZXJuYW1lO1xuICAgICAgICB0b2tlbi5lbWFpbFZlcmlmaWVkID0gdXNlci5lbWFpbFZlcmlmaWVkO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRva2VuO1xuICAgIH0sXG4gICAgYXN5bmMgc2Vzc2lvbih7IHNlc3Npb24sIHRva2VuIH0pIHtcbiAgICAgIGlmICh0b2tlbikge1xuICAgICAgICBzZXNzaW9uLnVzZXIuaWQgPSB0b2tlbi5pZCBhcyBzdHJpbmc7XG4gICAgICAgIHNlc3Npb24udXNlci51c2VybmFtZSA9IHRva2VuLnVzZXJuYW1lIGFzIHN0cmluZztcbiAgICAgICAgc2Vzc2lvbi51c2VyLmVtYWlsVmVyaWZpZWQgPSB0b2tlbi5lbWFpbFZlcmlmaWVkIGFzIERhdGUgfCBudWxsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNlc3Npb247XG4gICAgfVxuICB9XG59IHNhdGlzZmllcyBOZXh0QXV0aENvbmZpZyAiXSwibmFtZXMiOlsiR2l0SHViIiwiR29vZ2xlIiwiQ3JlZGVudGlhbHMiLCJjcmVhdGVDbGllbnQiLCJiY3J5cHQiLCJjcnlwdG8iLCJSZXNlbmQiLCJzdXBhYmFzZSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwicmVzZW5kIiwiUkVTRU5EX0FQSV9LRVkiLCJhdXRoQ29uZmlnIiwicGFnZXMiLCJzaWduSW4iLCJ2ZXJpZnlSZXF1ZXN0IiwiZXJyb3IiLCJwcm92aWRlcnMiLCJjbGllbnRJZCIsIkdJVEhVQl9JRCIsImNsaWVudFNlY3JldCIsIkdJVEhVQl9TRUNSRVQiLCJHT09HTEVfSUQiLCJHT09HTEVfU0VDUkVUIiwiY3JlZGVudGlhbHMiLCJlbWFpbCIsImxhYmVsIiwidHlwZSIsInBhc3N3b3JkIiwidXNlcm5hbWUiLCJpc1NpZ251cCIsImF1dGhvcml6ZSIsIkVycm9yIiwiZGF0YSIsImV4aXN0aW5nVXNlciIsImZyb20iLCJzZWxlY3QiLCJvciIsInRvTG93ZXJDYXNlIiwic2luZ2xlIiwiaGFzaGVkUGFzc3dvcmQiLCJoYXNoIiwidXNlcklkIiwicmFuZG9tVVVJRCIsIm5ld1VzZXIiLCJjcmVhdGVFcnJvciIsImluc2VydCIsImlkIiwiaGFzaGVkX3Bhc3N3b3JkIiwiZW1haWxWZXJpZmllZCIsImNvbnNvbGUiLCJtZXNzYWdlIiwidmVyaWZpY2F0aW9uVG9rZW4iLCJ0b2tlbkVycm9yIiwiaWRlbnRpZmllciIsInRva2VuIiwiZXhwaXJlcyIsIkRhdGUiLCJub3ciLCJ2ZXJpZmljYXRpb25VcmwiLCJORVhUQVVUSF9VUkwiLCJlbWFpbHMiLCJzZW5kIiwidG8iLCJzdWJqZWN0IiwiaHRtbCIsImxvZyIsImVtYWlsRXJyb3IiLCJ1c2VyIiwiZXEiLCJpc1ZhbGlkUGFzc3dvcmQiLCJjb21wYXJlIiwiXyIsInVzZXJXaXRob3V0UGFzc3dvcmQiLCJjYWxsYmFja3MiLCJqd3QiLCJ0cmlnZ2VyIiwic2Vzc2lvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(middleware)/./app/lib/auth.config.ts\n");

/***/ })

});